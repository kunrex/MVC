<nav class="navbar navbar-expand-lg navbar-dark navbar-custom fixed-top">
  <div class="container px-5">
    <a class="navbar-brand">MVC.Food</a>
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation"><span class="navbar-toggler-icon"></span></button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ms-auto">
        <li class="nav-item text-center"><a class="nav-link">Administrative Options</a></li>
      </ul>
    </div>
  </div>
</nav>
<header class="masthead text-black align-content-center h-100">
  <div class="masthead-content">
    <div class="main container d-flex flex-column justify-content-center align-items-center bg-white rounded-5 p-5">
      <div class="text-center w-100">
        <h1>
          Add New Items and Tags
        </h1>
        <hr class="w-100">
      </div>
      <div class="flex-grow-1 overflow-y-scroll no-wrap p-3 mb-3 w-100">
        <div class="w-100 scroll">
          <div class="accordion w-100" id="accordionAdd">
            <div class="accordion-item w-100">
              <h2 class="accordion-header w-100" id="allTags">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseOne" aria-expanded="false" aria-controls="collapseOne">
                  Current Tags
                </button>
              </h2>
              <div id="collapseOne" class="accordion-collapse collapse w-100" aria-labelledby="allTags" data-bs-parent="#accordionAdd">
                <div class="accordion-body w-100 overflow-x-scroll no-wrap">
                  <ng-container *ngIf="tags.length > 0; else noTags">
                    <span *ngFor="let tag of tags; index as i; trackBy: tagTracking" class="p-2 rounded-2 text-center text-warning-emphasis text-bg-warning fw-bold ms-1 me-1"> {{ tag }} </span>
                  </ng-container>
                  <ng-template #noTags>
                    <div class="w-100 text-center text-dark-emphasis p5">
                      <h4>No Tags</h4>
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
            <div class="accordion-item w-100">
              <h2 class="accordion-header w-100" id="allItems">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseTwo" aria-expanded="false" aria-controls="collapseTwo">
                  Edit Food Tags
                </button>
              </h2>
              <div id="collapseTwo" class="accordion-collapse collapse w-100" aria-labelledby="allItems" data-bs-parent="#accordionAdd">
                <div class="accordion-body w-100 d-flex flex-column">
                  <div class="w-100 d-flex flex-column mb-3">
                    <label for="editTagItems" class="mb-2">Choose an Item:</label>
                    <select [(ngModel)]="updateTagOptions.idValue" name="items" id="editTagItems" class="p-2">
                      <option value="" selected disabled>Select an option</option>
                      <option *ngFor="let item of menu; index as i; trackBy: itemTracking" (change)="selectEditTagsItem($event)" value="{{ item.id }}"> {{ item.name }} </option>
                    </select>
                  </div>
                  <div class="w-100 text-center mb-3">
                    <h5>
                      Tags
                    </h5>
                  </div>
                  <div class="w-100 overflow-x-scroll no-wrap mb-3 p-2">
                    <ng-container *ngIf="tags.length > 0; else noTagsEdit">
                      <button *ngFor="let tag of tags; index as i; trackBy: tagTracking" [disabled]="updateTagOptions.disableEditing" (click)="toggleTag(tag)" class="btn fw-bold ms-1 me-1" [ngClass]="checkTagSelected(tag) ? 'text-warning-emphasis text-bg-warning' : 'text-warning'"> {{ tag }} </button>
                    </ng-container>
                    <ng-template #noTagsEdit>
                      <div class="w-100 text-center text-dark-emphasis p5">
                        <h4>No Tags</h4>
                      </div>
                    </ng-template>
                  </div>
                  <div class="w-100 text-center">
                    <button [disabled]="updateTagOptions.disableEditing" (click)="confirmEditTagChanges()" class="btn btn-primary text-primary-emphasis text-bg-primary btn-lg rounded-pill me-4 mt-4">Confirm</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item w-100">
              <h2 class="accordion-header w-100" id="newTag">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseThree" aria-expanded="false" aria-controls="collapseThree">
                  Create a New Tag
                </button>
              </h2>
              <div id="collapseThree" class="accordion-collapse collapse w-100"  aria-labelledby="newTag" data-bs-parent="#accordionAdd">
                <div class="accordion-body w-100 d-flex flex-column flex-md-row justify-content-evenly align-items-center">
                  <div class="w-100 w-md-75">
                    <label for="createTagInput" class="form-label">New Tag</label>
                    <span class="text-danger fs-6">{{ createTagOptions.error }}</span>
                    <input [(ngModel)]="createTagOptions.value" type="text" name="tag" class="form-control" id="createTagInput" placeholder="Enter New Tag" maxlength="50">
                  </div>
                  <div class="w-100 w-md-25 text-center">
                    <button (click)="createTag()" class="btn btn-primary text-primary-emphasis text-bg-primary btn-lg rounded-pill">Confirm</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item w-100">
              <h2 class="accordion-header w-100" id="newItem">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFour" aria-expanded="false" aria-controls="collapseFour">
                  Add a New Food Item
                </button>
              </h2>
              <div id="collapseFour" class="accordion-collapse collapse w-100" aria-labelledby="newItem" data-bs-parent="#accordionAdd">
                <div class="accordion-body w-100">
                  <div class="mb-3 w-100">
                    <label for="addFoodName" class="form-label">Name</label>
                    <input [(ngModel)]="createFoodOptions.name" type="text" name="name" class="form-control" id="addFoodName" placeholder="Enter name" minlength="1" maxlength="100">
                  </div>
                  <div class="mb-3 w-100">
                    <label for="addFoodDescription" class="form-label">Enter Description</label>
                    <input [(ngModel)]="createFoodOptions.description" type="text" name="description" class="form-control" id="addFoodDescription" placeholder="Enter Description" minlength="1" maxlength="300">
                  </div>
                  <div class="mb-3 w-100">
                    <label for="addFoodPrice" class="form-label">Enter Price</label>
                    <input [(ngModel)]="createFoodOptions.price" type="number" name="price" class="form-control" id="addFoodPrice" min="0" step="1" placeholder="Enter Price">
                  </div>
                  <div class="mb-3 w-100 d-flex justify-content-evenly">
                    <button (click)="setVegetarian()" class="btn fw-bold ms-1 me-1" [ngClass]="createFoodOptions.vegetarian ? 'text-success-emphasis text-bg-success' : 'text-success'">Vegetarian</button>
                    <button (click)="setNonVegetarian()" class="btn fw-bold ms-1 me-1" [ngClass]="createFoodOptions.vegetarian ? 'text-danger' : 'text-danger-emphasis text-bg-danger'">Non Vegetarian</button>
                  </div>
                  <div class="mb-3 w-100">
                    <label>Cooking Duration</label>
                    <div class="d-flex justify-content-evenly">
                      <input [(ngModel)]="createFoodOptions.timeHours" type="number" class="form-control ms-1 me-1" name="hours" min="0" max="23" step="1" placeholder="hh">
                      <input [(ngModel)]="createFoodOptions.timeMinutes" type="number" class="form-control ms-1 me-1" name="minutes" min="0" max="59" step="1" placeholder="mm">
                      <input [(ngModel)]="createFoodOptions.timeSeconds" type="number" class="form-control ms-1 me-1" name="seconds" min="0" max="59" step="1" placeholder="ss">
                    </div>
                  </div>
                  <div class="mb-3 w-100 d-flex flex-column flex-md-row justify-content-evenly">
                    <div class="w-100 w-md-75">
                      <label for="addFoodImageURL" class="form-label">Image Source</label>
                      <input [(ngModel)]="createFoodOptions.imageURL" type="url" name="image" class="form-control" id="addFoodImageURL" placeholder="Enter URL">
                    </div>
                    <div class="w-100 w-md-25 text-center">
                      <button (click)="fetchImage()" class="btn btn-primary text-primary-emphasis text-bg-primary btn-lg rounded-pill m-3">Fetch</button>
                    </div>
                  </div>
                  <ng-container *ngIf="createFoodOptions.showImage">
                    <div class="mb-3 w-100 form-control d-flex flex-column p-2">
                      <img src="{{ createFoodOptions.imageURL }}" (load)="createFoodOptions.imageLoaded = true" class="w-100 h-auto">
                    </div>
                  </ng-container>
                  <div class="mb-3 w-100 d-flex justify-content-center align-items-end text-danger overflow-x-scroll no-wrap p-2">
                    {{ createFoodOptions.error }}
                  </div>
                  <div class="mb-3 w-100 text-center">
                    <button (click)="addFoodConfirm()" class="btn btn-primary btn-xl rounded-pill">Confirm</button>
                  </div>
                </div>
              </div>
            </div>
            <div class="accordion-item w-100">
              <h2 class="accordion-header w-100" id="userPermissions">
                <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFive" aria-expanded="false" aria-controls="collapseFive">
                  Update User Permissions
                </button>
              </h2>
              <div id="collapseFive" class="accordion-collapse collapse w-100" aria-labelledby="userPermissions" data-bs-parent="#accordionAdd">
                <div class="accordion-body w-100 overflow-x-scroll no-wrap">
                  <ng-container *ngIf="!userPermissionsOptions.permissionsLoaded; else showPermissions">
                    <div class="w-100 scroll">
                      <form class="w-100 d-flex flex-column flex-md-row justify-content-evenly align-items-center mb-3">
                        <div class="w-100 w-md-75 my-2 mx-5">
                          <label for="email" class="form-label">User Email</label>
                          <input [(ngModel)]="userPermissionsOptions.email" type="email" name="email" class="form-control" id="email" placeholder="Enter User Email" minlength="1" maxlength="255">
                        </div>
                        <button (click)="loadUserPermissions()" type="submit" class="btn btn-primary text-primary-emphasis text-bg-primary btn-lg rounded-pill">Fetch User</button>
                      </form>
                      <div class="w-100 text-center text-danger m-2"> {{ userPermissionsOptions.error }} </div>
                    </div>
                  </ng-container>
                  <ng-template #showPermissions>
                    <div class="w-100 d-flex flex-column flex-md-row justify-content-evenly align-items-end p-3">
                      <div class="w-100 w-md-50 w-md-50 d-flex flex-column justify-content-evenly align-items-lg-baseline overflow-x-scroll no-wrap my-2 p-3">
                        <h5> {{ userPermissionsOptions.email }} </h5>
                      </div>
                      <div class="w-100 w-md-50 d-flex justify-content-evenly overflow-x-scroll no-wrap my-2 p-3">
                        <span class="p-2 rounded-2 text-center text-dark-emphasis text-bg-dark fw-bold ms-1 me-1">Customer</span>
                        <button (click)="toggleChef()" class="btn p-2 fw-bold ms-1 me-1" [ngClass]="userPermissionsOptions.isChef ? 'text-warning-emphasis text-bg-warning' : 'text-warning'">Chef</button>
                        <button (click)="setAdmin()" class="btn p-2 fw-bold ms-1 me-1" [ngClass]="userPermissionsOptions.isAdmin ? 'text-success-emphasis text-bg-success' : 'text-success'">Admin</button>
                      </div>
                    </div>
                    <div class="w-100 d-flex flex-column flex-sm-row justify-content-evenly align-items-center">
                      <button (click)="confirmUserPermissions()" id="confirm" class="btn btn-primary btn-xl rounded-pill m-2">Confirm</button>
                      <button (click)="clearUserPermissions()" class="btn btn-primary btn-xl rounded-pill m-2">Cancel</button>
                    </div>
                  </ng-template>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="w-100 text-center">
        <button (click)="loadDashboard()" class="btn btn-primary btn-xl rounded-pill">Return</button>
      </div>
    </div>
  </div>
  <div class="bg-circle-1 bg-circle bobble-effect-10"></div>
  <div class="bg-circle-2 bg-circle bobble-effect-8"></div>
  <div class="bg-circle-3 bg-circle bobble-effect-6"></div>
  <div class="bg-circle-4 bg-circle bobble-effect-4"></div>
</header>
